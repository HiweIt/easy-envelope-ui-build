import{z as _,c as o,B as m,C as x,ag as le,ah as se,at as ie,ai as ue,r as D,aj as re,U as ce,V as de,au as fe,ak as ve,av as me,w as Q,ba as he,a9 as ge,bb as be,bc as R,ab as ye,bd as qe,T as ke,A as _e,O as xe,be as Be,bf as Pe,bg as Se,J as Te}from"./index.505ac9ba.js";import{u as Ce,v as I,a as Oe,b as we,d as Ee,p as H,r as K,s as Fe,e as Ae}from"./position-engine.cee4fc96.js";var Qe=_({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:r}){const a=o(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>m("div",{class:a.value},x(r.default))}}),Re=_({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:r}){const a=o(()=>parseInt(e.lines,10)),c=o(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(a.value===1?" ellipsis":"")),n=o(()=>e.lines!==void 0&&a.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":a.value}:null);return()=>m("div",{style:n.value,class:c.value},x(r.default))}}),Ie=_({name:"QMenu",inheritAttrs:!1,props:{...Ce,...le,...se,...ie,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:I},self:{type:String,validator:I},offset:{type:Array,validator:Oe},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...ue,"click","escapeKey"],setup(e,{slots:r,emit:a,attrs:c}){let n=null,v,d,h;const B=xe(),{proxy:g}=B,{$q:l}=g,s=D(null),i=D(!1),W=o(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),j=re(e,l),{registerTick:L,removeTick:U}=ce(),{registerTimeout:P}=de(),{transitionProps:$,transitionStyle:z}=fe(e),{localScrollTarget:S,changeScrollEvent:J,unconfigureScrollTarget:N}=we(e,A),{anchorEl:u,canShow:V}=Ee({showing:i}),{hide:T}=ve({showing:i,canShow:V,handleShow:p,handleHide:ee,hideOnRouteChange:W,processOnMount:!0}),{showPortal:C,hidePortal:O,renderPortal:G}=me(B,s,ae,"menu"),b={anchorEl:u,innerRef:s,onClickOutside(t){if(e.persistent!==!0&&i.value===!0)return T(t),(t.type==="touchstart"||t.target.classList.contains("q-dialog__backdrop"))&&Te(t),!0}},w=o(()=>H(e.anchor||(e.cover===!0?"center middle":"bottom start"),l.lang.rtl)),X=o(()=>e.cover===!0?w.value:H(e.self||"top start",l.lang.rtl)),Y=o(()=>(e.square===!0?" q-menu--square":"")+(j.value===!0?" q-menu--dark q-dark":"")),Z=o(()=>e.autoClose===!0?{onClick:te}:{}),E=o(()=>i.value===!0&&e.persistent!==!0);Q(E,t=>{t===!0?(Pe(q),Ae(b)):(R(q),K(b))});function y(){Be(()=>{let t=s.value;t&&t.contains(document.activeElement)!==!0&&(t=t.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||t.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||t.querySelector("[autofocus], [data-autofocus]")||t,t.focus({preventScroll:!0}))})}function p(t){if(n=e.noRefocus===!1?document.activeElement:null,he(M),C(),A(),v=void 0,t!==void 0&&(e.touchPosition||e.contextMenu)){const k=ge(t);if(k.left!==void 0){const{top:oe,left:ne}=u.value.getBoundingClientRect();v={left:k.left-ne,top:k.top-oe}}}d===void 0&&(d=Q(()=>l.screen.width+"|"+l.screen.height+"|"+e.self+"|"+e.anchor+"|"+l.lang.rtl,f)),e.noFocus!==!0&&document.activeElement.blur(),L(()=>{f(),e.noFocus!==!0&&y()}),P(()=>{l.platform.is.ios===!0&&(h=e.autoClose,s.value.click()),f(),C(!0),a("show",t)},e.transitionDuration)}function ee(t){U(),O(),F(!0),n!==null&&(t===void 0||t.qClickOutside!==!0)&&(((t&&t.type.indexOf("key")===0?n.closest('[tabindex]:not([tabindex^="-"])'):void 0)||n).focus(),n=null),P(()=>{O(!0),a("hide",t)},e.transitionDuration)}function F(t){v=void 0,d!==void 0&&(d(),d=void 0),(t===!0||i.value===!0)&&(be(M),N(),K(b),R(q)),t!==!0&&(n=null)}function A(){(u.value!==null||e.scrollTarget!==void 0)&&(S.value=ye(u.value,e.scrollTarget),J(S.value,f))}function te(t){h!==!0?(qe(g,t),a("click",t)):h=!1}function M(t){E.value===!0&&e.noFocus!==!0&&Se(s.value,t.target)!==!0&&y()}function q(t){a("escapeKey"),T(t)}function f(){const t=s.value;t===null||u.value===null||Fe({el:t,offset:e.offset,anchorEl:u.value,anchorOrigin:w.value,selfOrigin:X.value,absoluteOffset:v,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function ae(){return m(ke,$.value,()=>i.value===!0?m("div",{role:"menu",...c,ref:s,tabindex:-1,class:["q-menu q-position-engine scroll"+Y.value,c.class],style:[c.style,z.value],...Z.value},x(r.default)):null)}return _e(F),Object.assign(g,{focus:y,updatePosition:f}),G}});export{Ie as Q,Qe as a,Re as b};
